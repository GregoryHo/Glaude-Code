# Notion MCP Integration å¯¦ä½œæ–‡ä»¶

## ðŸ“‹ å°ˆæ¡ˆèƒŒæ™¯èˆ‡éœ€æ±‚

### åŽŸå§‹éœ€æ±‚
ä½¿ç”¨è€…éœ€è¦ Claude Code å”åŠ©**å¤§é‡è®€å–ã€æ•´ç†ã€å¯«å…¥** Notion å…§å®¹ï¼Œä½†æ“”å¿ƒï¼š
1. èª¤æ”¹é‡è¦è³‡æ–™
2. ç¨‹å¼éŒ¯èª¤å°Žè‡´å¤§é‡éŒ¯èª¤æ“ä½œ
3. ç„¡æ³•è¿½è¹¤ Claude åšäº†ä»€éº¼

### æ ¸å¿ƒè¨´æ±‚
- **å®‰å…¨æ€§**ï¼šé¿å…ç½é›£æ€§éŒ¯èª¤
- **ä¾¿åˆ©æ€§**ï¼šä¿ç•™å®Œæ•´ Notion åŠŸèƒ½
- **å¯è¿½è¹¤**ï¼šçŸ¥é“æ‰€æœ‰æ“ä½œè¨˜éŒ„

## ðŸ—ï¸ æž¶æ§‹è¨­è¨ˆæ±ºç­–

### ç‚ºä»€éº¼ä¸ç›´æŽ¥ç”¨å®˜æ–¹ MCP Serverï¼Ÿ

**å®˜æ–¹ @notionhq/notion-mcp-server çš„å•é¡Œï¼š**
- âŒ å¯ä»¥å­˜å–æ‰€æœ‰æŽˆæ¬Šé é¢ï¼ˆç„¡å€åŸŸé™åˆ¶ï¼‰
- âŒ æ²’æœ‰æ“ä½œé™æµï¼ˆå¯èƒ½å¤±æŽ§ï¼‰
- âŒ æ²’æœ‰æ“ä½œæ—¥èªŒï¼ˆä¸çŸ¥é“åšäº†ä»€éº¼ï¼‰

**ä½†å®˜æ–¹çš„å„ªé»žï¼š**
- âœ… åŠŸèƒ½å®Œæ•´ä¸”ç©©å®š
- âœ… å®˜æ–¹ç¶­è­·ï¼ŒæŒçºŒæ›´æ–°
- âœ… å¯¦ä½œäº†å®Œæ•´ MCP å”è­°

### ç‚ºä»€éº¼æŽ¡ç”¨ Wrapper æ¨¡å¼ï¼Ÿ

**åˆå§‹è€ƒæ…®çš„æ–¹æ¡ˆï¼š**
1. âŒ **å®Œå…¨è‡ªè£½ MCP Server** - å¤ªè¤‡é›œï¼Œé›£ç¶­è­·
2. âŒ **åªç”¨å®˜æ–¹** - ç¼ºä¹å®‰å…¨æŽ§åˆ¶
3. âœ… **Wrapper æ¨¡å¼** - å¹³è¡¡çš„æ–¹æ¡ˆ

**æœ€çµ‚å¯¦ä½œçš„ Wrapper æž¶æ§‹ï¼š**
```
Claude Code
    â†“ [å‘¼å« MCP API]
notion-mcp-wrapper.js (ä½œç‚º MCP Server)
    â”œâ”€â”€ æŽ¥æ”¶ MCP è«‹æ±‚
    â”œâ”€â”€ åŸ·è¡Œå®‰å…¨æª¢æŸ¥ï¼ˆé™æµã€å€åŸŸã€æ—¥èªŒï¼‰
    â””â”€â”€ spawn å®˜æ–¹ notion-mcp-server ä½œç‚ºå­é€²ç¨‹
            â†“
        Notion API
```

**é—œéµç†è§£**ï¼šWrapper æœ¬èº«å°±æ˜¯ä¸€å€‹ MCP Serverï¼Œå®ƒæœƒå•Ÿå‹•å®˜æ–¹ MCP ä½œç‚ºå­é€²ç¨‹

- ä¿ç•™å®˜æ–¹æ‰€æœ‰åŠŸèƒ½
- åŠ å…¥å¿…è¦çš„å®‰å…¨æª¢æŸ¥
- å®˜æ–¹æ›´æ–°æ™‚è‡ªå‹•ç²ç›Š
- å¯¦ä½œç°¡å–®ï¼Œæ˜“ç¶­è­·

### ç‚ºä»€éº¼ç°¡åŒ–å®‰å…¨åŠŸèƒ½ï¼Ÿ

**Notion å·²æä¾›çš„ä¿è­·ï¼š**
- âœ… ç‰ˆæœ¬æ­·å²ï¼ˆå¯å›žæº¯ 30 å¤©ï¼‰
- âœ… Integration ç„¡æ³•æ°¸ä¹…åˆªé™¤
- âœ… é é¢ç´šæ¬Šé™æŽ§åˆ¶

**æˆ‘å€‘åªéœ€è¦è£œå……ï¼š**
1. **æ“ä½œé™æµ** - Notion æ²’æœ‰çš„
2. **æ“ä½œæ—¥èªŒ** - æ–¹ä¾¿å¯©è¨ˆ
3. **å€åŸŸéš”é›¢** - é¡å¤–çš„å®‰å…¨å±¤ï¼ˆå¯é¸ï¼‰

## ðŸ’» æŠ€è¡“å¯¦ä½œç´°ç¯€

### 1. Wrapper é‹ä½œåŽŸç†

```javascript
// notion-mcp-wrapper.js æ ¸å¿ƒé‚è¼¯

1. å•Ÿå‹•å®˜æ–¹ MCP Server ä½œç‚ºå­é€²ç¨‹
2. æ””æˆªä¾†è‡ª Claude çš„è«‹æ±‚
3. å¦‚æžœæ˜¯å¯«å…¥æ“ä½œï¼š
   - æª¢æŸ¥æ“ä½œé »çŽ‡ï¼ˆé˜²å¤±æŽ§ï¼‰
   - æª¢æŸ¥ç›®æ¨™å€åŸŸï¼ˆå¦‚æžœå•Ÿç”¨ï¼‰
   - è¨˜éŒ„æ“ä½œæ—¥èªŒ
4. é€šéŽæª¢æŸ¥å‰‡è½‰ç™¼çµ¦å®˜æ–¹ MCP
5. å°‡å›žæ‡‰å‚³å›žçµ¦ Claude
```

### 2. é—œéµå®‰å…¨æª¢æŸ¥

**æ“ä½œé™æµï¼š**
```javascript
// é è¨­ 100 æ¬¡/å°æ™‚
// é˜²æ­¢ç¨‹å¼éŒ¯èª¤å°Žè‡´ç„¡é™å¾ªç’°å¯«å…¥
if (recentOps.length >= MAX_OPS_PER_HOUR) {
  return { allowed: false, reason: "Rate limit exceeded" }
}
```

**å€åŸŸéš”é›¢ï¼ˆå¯é¸ï¼‰ï¼š**
```javascript
// å¦‚æžœè¨­å®šäº† NOTION_CLAUDE_ZONE_ID
// ç¢ºä¿æ‰€æœ‰æ“ä½œéƒ½åœ¨é€™å€‹å€åŸŸå…§
if (targetId !== claudeZoneId && !isChildOf(targetId, claudeZoneId)) {
  return { allowed: false, reason: "Outside Claude Zone" }
}
```

### 3. ç’°å¢ƒè®Šæ•¸è¨­è¨ˆ

```bash
# å¿…è¦è¨­å®š
NOTION_TOKEN=xxx              # Notion API Token

# å¯é¸çš„å®‰å…¨è¨­å®š
NOTION_CLAUDE_ZONE_ID=xxx    # é™åˆ¶æ“ä½œå€åŸŸ
MAX_OPERATIONS_PER_HOUR=100  # æ“ä½œé™æµ
STRICT_ZONE_CHECK=false      # æ˜¯å¦å¼·åˆ¶å€åŸŸæª¢æŸ¥
LOG_TO_FILE=true             # è¨˜éŒ„æ“ä½œæ—¥èªŒ
```

## ðŸ“¦ æª”æ¡ˆçµæ§‹èªªæ˜Ž

```
mcp/notion/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ notion-mcp-wrapper.js    # æ ¸å¿ƒ Wrapper
â”‚   â”œâ”€â”€ safe-wrapper.js          # (å·²å»¢æ£„) åŽŸæœ¬çš„å®Œæ•´æ›¿ä»£æ–¹æ¡ˆ
â”‚   â””â”€â”€ *.js                     # å…¶ä»–å˜—è©¦çš„ç‰ˆæœ¬
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup-wrapper.sh         # ä¸»è¦å®‰è£è…³æœ¬
â”‚   â””â”€â”€ *.sh                     # å…¶ä»–ç‰ˆæœ¬çš„è…³æœ¬
â”œâ”€â”€ .env.example                  # ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
â””â”€â”€ logs/                         # æ“ä½œæ—¥èªŒç›®éŒ„
```

## ðŸš€ éƒ¨ç½²æ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šå®‰è£ä¾è³´
```bash
# å®‰è£å®˜æ–¹ Notion MCP Server
npm install -g @notionhq/notion-mcp-server

# ç¢ºèªå®‰è£æˆåŠŸ
which notion-mcp-server
```

### æ­¥é©Ÿ 2ï¼šè¨­å®šç’°å¢ƒè®Šæ•¸

```bash
# å°‡ NOTION_TOKEN åŠ å…¥ .bash_profile æˆ– .zshrc
echo 'export NOTION_TOKEN="your_notion_token_here"' >> ~/.bash_profile
source ~/.bash_profile

# é©—è­‰ç’°å¢ƒè®Šæ•¸
echo $NOTION_TOKEN
```

### æ­¥é©Ÿ 3ï¼šæº–å‚™ Wrapperï¼ˆå¯é¸çš„å®‰å…¨å±¤ï¼‰

```bash
# è¨­å®šåŸ·è¡Œæ¬Šé™
cd mcp/notion
chmod +x src/notion-mcp-wrapper.js

# å»ºç«‹ç’°å¢ƒè¨­å®šæª”ï¼ˆé¸æ“‡æ€§ï¼Œwrapper æœƒè‡ªå‹•è®€å–ï¼‰
cat > .env << EOF
NOTION_TOKEN=$NOTION_TOKEN
MAX_OPERATIONS_PER_HOUR=100
STRICT_ZONE_CHECK=false
LOG_TO_FILE=true
NOTION_CLAUDE_ZONE_ID=  # é¸å¡«ï¼Œé™åˆ¶æ“ä½œå€åŸŸ
EOF
```

### æ­¥é©Ÿ 4ï¼šé…ç½® Claude Code

æ‚¨å¯ä»¥æ ¹æ“šéœ€æ±‚é…ç½®ä¸€å€‹æˆ–å…©å€‹ MCP serversï¼š

#### é…ç½®å®˜æ–¹ MCP Serverï¼ˆåŸºç¤Žä½¿ç”¨ï¼‰
```bash
claude mcp add notion /usr/local/bin/notion-mcp-server \
  --scope user \
  -e NOTION_TOKEN=$NOTION_TOKEN
```

#### é…ç½®å®‰å…¨ Wrapperï¼ˆå¤§é‡æ“ä½œæ™‚ä½¿ç”¨ï¼‰
```bash
claude mcp add notion-safe "/Users/gregho/Workspace/Personal/mcp/notion/src/notion-mcp-wrapper.js" \
  --scope user \
  -e NOTION_TOKEN=$NOTION_TOKEN \
  -e MAX_OPERATIONS_PER_HOUR=100 \
  -e STRICT_ZONE_CHECK=false \
  -e LOG_TO_FILE=true
```

**å»ºè­°**ï¼šåŒæ™‚é…ç½®å…©å€‹ï¼Œä½¿ç”¨ä¸åŒåç¨±ï¼ˆnotion å’Œ notion-safeï¼‰ï¼Œé€™æ¨£æ‚¨å¯ä»¥ï¼š
- ä½¿ç”¨ `notion` é€²è¡Œæ—¥å¸¸è®€å–å’Œç°¡å–®æ“ä½œ
- ä½¿ç”¨ `notion-safe` é€²è¡Œå¤§é‡æ‰¹æ¬¡æ“ä½œï¼ˆæœ‰é™æµå’Œæ—¥èªŒä¿è­·ï¼‰

### æ­¥é©Ÿ 5ï¼šé©—è­‰å®‰è£

```bash
# æŸ¥çœ‹å·²é…ç½®çš„ MCP servers
claude mcp list

# æ‡‰è©²çœ‹åˆ°ï¼ˆæ ¹æ“šæ‚¨çš„é…ç½®ï¼‰ï¼š
# notion: /usr/local/bin/notion-mcp-server - âœ“ Connected
# notion-safe: /path/to/notion-mcp-wrapper.js - âœ“ Connected
```

**æ³¨æ„äº‹é …**ï¼š
- å®˜æ–¹ notion-mcp-server æ˜¯å¿…è¦çš„åŸºç¤Žå…ƒä»¶
- Wrapper æ˜¯å¯é¸çš„å®‰å…¨å±¤ï¼Œå®ƒæœƒèª¿ç”¨å®˜æ–¹ server
- NOTION_TOKEN å¿…é ˆè¨­å®šï¼ˆå¾žç’°å¢ƒè®Šæ•¸æˆ– -e åƒæ•¸å‚³å…¥ï¼‰

## ðŸŽ¯ ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1ï¼šæ—¥å¸¸ä½¿ç”¨
- è®€å–å’Œæ•´ç†æ–‡ä»¶
- æ›´æ–°å°‘é‡é é¢
- å»ºç«‹å ±å‘Š

**è¨­å®šï¼š**
- ä½¿ç”¨åŸºæœ¬é…ç½®
- ä¾è³´ Notion æ¬Šé™æŽ§åˆ¶
- ä¸éœ€è¦å€åŸŸé™åˆ¶

### å ´æ™¯ 2ï¼šå¤§é‡è³‡æ–™è™•ç†
- æ‰¹é‡æ›´æ–°æ•¸ç™¾å€‹é é¢
- è³‡æ–™åº«é‡çµ„
- è‡ªå‹•åŒ–å·¥ä½œæµç¨‹

**è¨­å®šï¼š**
- å•Ÿç”¨åš´æ ¼å€åŸŸæª¢æŸ¥
- æé«˜æ“ä½œé™åˆ¶ï¼ˆå¦‚ 500/å°æ™‚ï¼‰
- æ‰€æœ‰æ“ä½œéƒ½åœ¨ Claude Zone å…§

### å ´æ™¯ 3ï¼šæ¸¬è©¦å’Œé–‹ç™¼
- æ¸¬è©¦æ–°åŠŸèƒ½
- é–‹ç™¼è‡ªå‹•åŒ–è…³æœ¬

**è¨­å®šï¼š**
- ä½¿ç”¨ç¨ç«‹çš„æ¸¬è©¦ Integration
- è¨­å®šæ›´ä½Žçš„æ“ä½œé™åˆ¶
- åªæŽˆæ¬Šæ¸¬è©¦é é¢

## âš ï¸ é‡è¦è€ƒé‡

### å®‰å…¨æ€§è€ƒé‡
1. **API Key ç®¡ç†**ï¼šæ°¸é ä¸è¦æäº¤åˆ° Git
2. **æ¬Šé™æœ€å°åŒ–**ï¼šåªæŽˆæ¬Šå¿…è¦çš„é é¢
3. **å®šæœŸå¯©è¨ˆ**ï¼šæª¢æŸ¥ logs/ ç›®éŒ„çš„æ“ä½œè¨˜éŒ„
4. **æ¸¬è©¦å…ˆè¡Œ**ï¼šé‡è¦æ“ä½œå…ˆåœ¨æ¸¬è©¦å€é©—è­‰

### æ•ˆèƒ½è€ƒé‡
1. **æ“ä½œé™æµ**ï¼šé è¨­ 100/å°æ™‚ï¼Œå¯ä¾éœ€æ±‚èª¿æ•´
2. **æ—¥èªŒå¤§å°**ï¼šå®šæœŸæ¸…ç†èˆŠæ—¥èªŒ
3. **å­é€²ç¨‹ç®¡ç†**ï¼šWrapper æœƒæ­£ç¢ºè™•ç†ä¿¡è™Ÿ

### ç¶­è­·è€ƒé‡
1. **å®˜æ–¹æ›´æ–°**ï¼šå®šæœŸæ›´æ–° @notionhq/notion-mcp-server
2. **æ—¥èªŒè¼ªæ›¿**ï¼šå¯¦ä½œæ—¥èªŒè‡ªå‹•æ¸…ç†ï¼ˆå¦‚éœ€è¦ï¼‰
3. **ç›£æŽ§å‘Šè­¦**ï¼šå¯åŠ å…¥ç•°å¸¸æ“ä½œé€šçŸ¥

## ðŸ”„ ç‰ˆæœ¬æ­·ç¨‹

### v1ï¼šå®Œå…¨æ›¿ä»£æ–¹æ¡ˆ
- å˜—è©¦å®Œå…¨è‡ªè£½ MCP Server
- å¤ªè¤‡é›œï¼Œé›£ä»¥ç¶­è­·
- **å·²å»¢æ£„**

### v2ï¼šWrapper æ¨¡å¼ï¼ˆç•¶å‰ï¼‰
- åŒ…è£å®˜æ–¹ MCP Server
- åŠ å…¥å®‰å…¨æª¢æŸ¥å±¤
- å¹³è¡¡å®‰å…¨èˆ‡åŠŸèƒ½
- **æŽ¨è–¦ä½¿ç”¨**

## ðŸ“ æœªä¾†æ”¹é€²æ–¹å‘

1. **æ›´æ™ºèƒ½çš„å€åŸŸæª¢æŸ¥**
   - å¿«å–é é¢å±¤ç´šé—œä¿‚
   - æ¸›å°‘ API èª¿ç”¨

2. **æ“ä½œå¯©è¨ˆå ±è¡¨**
   - è‡ªå‹•ç”Ÿæˆæ—¥å ±/é€±å ±
   - ç•°å¸¸æ“ä½œå‘Šè­¦

3. **é…ç½®ç®¡ç†ä»‹é¢**
   - Web UI æŸ¥çœ‹æ“ä½œè¨˜éŒ„
   - å‹•æ…‹èª¿æ•´é™åˆ¶

## ðŸ¤ çµ¦æœªä¾†å¯¦ä½œè€…çš„å»ºè­°

1. **ä¿æŒç°¡å–®**ï¼šä¸è¦éŽåº¦è¨­è¨ˆï¼ŒNotion å·²æœ‰å¾ˆå¤šä¿è­·
2. **å°ˆæ³¨æ ¸å¿ƒ**ï¼šé™æµå’Œæ—¥èªŒæ˜¯æœ€é‡è¦çš„
3. **æ¸¬è©¦å„ªå…ˆ**ï¼šå…ˆåœ¨å°ç¯„åœæ¸¬è©¦
4. **æ¼¸é€²éƒ¨ç½²**ï¼šå…ˆç”¨åŸºæœ¬æ¨¡å¼ï¼Œéœ€è¦æ™‚æ‰å•Ÿç”¨åš´æ ¼æ¨¡å¼
5. **ä¿ç•™å½ˆæ€§**ï¼šç’°å¢ƒè®Šæ•¸é…ç½®ï¼Œä¸è¦å¯«æ­»

## ðŸ“ž å•é¡ŒæŽ’æŸ¥

### Wrapper æ²’æœ‰æ””æˆªæ“ä½œï¼Ÿ
- æª¢æŸ¥æ˜¯å¦æ­£ç¢ºé…ç½® Claude Code
- ç¢ºèªä½¿ç”¨ wrapper è·¯å¾‘è€ŒéžåŽŸç”Ÿ MCP

### æ“ä½œè¢«æ‹’çµ•ï¼Ÿ
- æª¢æŸ¥ logs/ ç›®éŒ„æŸ¥çœ‹åŽŸå› 
- å¯èƒ½æ˜¯è¶…éŽé™æµæˆ–å€åŸŸé™åˆ¶

### å®˜æ–¹ MCP æ›´æ–°å¾Œä¸ç›¸å®¹ï¼Ÿ
- Wrapper è¨­è¨ˆç‚ºé€æ˜Žä»£ç†ï¼Œæ‡‰è©²è‡ªå‹•ç›¸å®¹
- å¦‚æœ‰å•é¡Œï¼Œæª¢æŸ¥ MCP å”è­°æ˜¯å¦æœ‰è®Šæ›´

---

*æœ€å¾Œæ›´æ–°ï¼š2024-01-30*
*ä½œè€…ï¼šGregory & Claude Code*